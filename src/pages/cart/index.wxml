<!-- Ë¥≠Áâ©ËΩ¶È°µÈù¢ -->
<view class="cart-container">
  <block wx:if="{{!isEmpty}}">
    <!-- Ë¥≠Áâ©ËΩ¶Â§¥ÈÉ® -->
    <view class="cart-header">
      <view class="select-all" bindtap="toggleSelectAll">
        <view class="checkbox {{selectedAll ? 'checked' : ''}}">
          <!-- ÈÄâ‰∏≠Êó∂ÔºåËÉåÊôØ‰∏∫ÁôΩËâ≤ÔºåÂõæÊ†á‰∏∫ËìùËâ≤ -->
          <icon wx:if="{{selectedAll}}" type="success" size="20" color="#0088cc"/>
        </view>
        <text>{{i18n.selectAll || 'ÂÖ®ÈÄâ'}}</text>
      </view>
    </view>

    <!-- Ë¥≠Áâ©ËΩ¶ÂàóË°® -->
    <view class="cart-list">
      <view class="cart-item-container" wx:for="{{cartItems}}" wx:key="id">
        <movable-area class="movable-area">
          <movable-view class="movable-view" direction="horizontal" x="{{item.x || 0}}" inertia="true" 
                      out-of-bounds="{{true}}" damping="30" bindchange="handleMovableChange" 
                      bindtouchend="handleTouchEnd" data-index="{{index}}">
            <view class="cart-item" bindtap="resetSlide" data-index="{{index}}">
              <!-- ÂïÜÂìÅÈÄâÊã©Ê°Ü -->
              <view class="item-select" catchtap="toggleSelect" data-index="{{index}}">
                <view class="checkbox {{item.selected ? 'checked' : ''}}">
                  <!-- ÈÄâ‰∏≠Êó∂ÔºåËÉåÊôØ‰∏∫ËìùËâ≤ÔºåÂõæÊ†á‰∏∫ÁôΩËâ≤ -->
                  <icon wx:if="{{item.selected}}" type="success" size="20" color="#ffffff"/>
                </view>
              </view>
              
              <!-- ÂïÜÂìÅÂõæÁâá -->
              <image class="item-image" src="{{item.imageUrl}}" mode="aspectFill" catchtap=""></image>
              
              <!-- ÂïÜÂìÅ‰ø°ÊÅØ -->
              <view class="item-info" catchtap="">
                <view class="item-content">
                  <view class="item-name">{{item.name}}</view>
                  <view class="item-price">{{i18n.unit || '¬•'}}{{item.price}}</view>
                </view>
                
                <!-- ÂïÜÂìÅÊï∞ÈáèÊéßÂà∂ -->
                <view class="item-count">
                  <view class="count-btn {{item.count <= 1 ? 'disabled' : ''}}" catchtap="decreaseCount" data-index="{{index}}">-</view>
                  <view class="count-number">{{item.count}}</view>
                  <view class="count-btn" catchtap="increaseCount" data-index="{{index}}">+</view>
                </view>
              </view>
            </view>
          </movable-view>
          <!-- Âà†Èô§ÊåâÈíÆ -->
          <view class="delete-btn-container" bindtap="deleteItem" data-index="{{index}}">
            <view class="delete-btn-text">{{i18n.delete || 'Âà†Èô§'}}</view>
          </view>
        </movable-area>
      </view>
    </view>

    <!-- ÁªìÁÆóÊ†è -->
    <view class="checkout-bar">
      <view class="total-price">
        {{i18n.total || 'ÂêàËÆ°'}}: <text class="price">{{i18n.unit || '¬•'}}{{totalPrice}}</text>
      </view>
      <view class="checkout-btn" bindtap="checkout">{{i18n.checkout || 'ÂéªÁªìÁÆó'}}</view>
    </view>
  </block>

  <!-- Á©∫Ë¥≠Áâ©ËΩ¶ -->
  <block wx:else>
    <view class="empty-cart">
      <view class="empty-cart-icon">üõí</view>
      <view class="empty-cart-text">{{i18n.empty || 'Ë¥≠Áâ©ËΩ¶Á©∫Á©∫Â¶Ç‰πü'}}</view>
      <view class="go-shopping-btn" bindtap="goShopping">{{i18n.goShopping || 'ÂéªÈÄõÈÄõ'}}</view>
    </view>
  </block>
</view> 